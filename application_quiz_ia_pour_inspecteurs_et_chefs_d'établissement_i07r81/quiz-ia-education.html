<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz IA - √âducation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .quiz-card:hover {
            transform: translateY(-2px);
            transition: transform 0.2s ease-in-out;
        }
        .progress-bar {
            transition: width 0.3s ease-in-out;
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div id="app">
        <!-- Header -->
        <header class="sticky top-0 z-10 bg-white/80 backdrop-blur-sm h-16 flex justify-between items-center border-b shadow-sm px-4">
            <h2 class="text-xl font-semibold text-blue-600">Quiz IA - √âducation</h2>
            <button id="changeProfile" class="text-blue-600 hover:text-blue-800 font-medium hidden" onclick="showProfileSelection()">
                Changer de profil
            </button>
        </header>

        <!-- Main Content -->
        <main class="flex-1 p-4">
            <!-- Profile Selection -->
            <div id="profileSelection" class="max-w-4xl mx-auto fade-in">
                <div class="text-center mb-12">
                    <h1 class="text-4xl font-bold text-gray-900 mb-4">
                        Quiz de Connaissances IA
                    </h1>
                    <p class="text-xl text-gray-600 mb-6">
                        Testez vos connaissances sur l'Intelligence Artificielle dans l'√©ducation
                    </p>
                    <p class="text-gray-500">
                        S√©lectionnez votre profil pour acc√©der aux quiz adapt√©s
                    </p>
                </div>

                <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                    <!-- Profil Inspecteur -->
                    <div class="quiz-card bg-white rounded-lg shadow-lg p-8 hover:shadow-xl transition-shadow cursor-pointer border-2 border-transparent hover:border-blue-200"
                         onclick="selectProfile('inspector')">
                        <div class="text-center">
                            <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                <span class="text-3xl">üîç</span>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">Inspecteur</h3>
                            <p class="text-gray-600 mb-6">
                                Quiz sp√©cialis√©s sur l'utilisation de l'IA dans l'inspection p√©dagogique, 
                                l'analyse des pratiques d'enseignement et l'√©valuation des √©tablissements.
                            </p>
                            <div class="bg-blue-50 rounded-lg p-4 mb-6">
                                <h4 class="font-semibold text-blue-900 mb-2">Th√®mes abord√©s :</h4>
                                <ul class="text-sm text-blue-800 space-y-1">
                                    <li>‚Ä¢ Analyse des donn√©es p√©dagogiques</li>
                                    <li>‚Ä¢ Outils d'aide √† l'inspection</li>
                                    <li>‚Ä¢ √âthique et transparence</li>
                                    <li>‚Ä¢ Accompagnement des √©quipes</li>
                                </ul>
                            </div>
                            <button class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors font-medium">
                                Acc√©der aux quiz Inspecteur
                            </button>
                        </div>
                    </div>

                    <!-- Profil Chef d'√âtablissement -->
                    <div class="quiz-card bg-white rounded-lg shadow-lg p-8 hover:shadow-xl transition-shadow cursor-pointer border-2 border-transparent hover:border-green-200"
                         onclick="selectProfile('chef_etablissement')">
                        <div class="text-center">
                            <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                <span class="text-3xl">üè´</span>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">Chef d'√âtablissement</h3>
                            <p class="text-gray-600 mb-6">
                                Quiz d√©di√©s √† l'int√©gration de l'IA dans la gestion d'√©tablissement, 
                                l'optimisation des ressources et le pilotage p√©dagogique.
                            </p>
                            <div class="bg-green-50 rounded-lg p-4 mb-6">
                                <h4 class="font-semibold text-green-900 mb-2">Th√®mes abord√©s :</h4>
                                <ul class="text-sm text-green-800 space-y-1">
                                    <li>‚Ä¢ Gestion des emplois du temps</li>
                                    <li>‚Ä¢ Ressources humaines</li>
                                    <li>‚Ä¢ Pilotage et indicateurs</li>
                                    <li>‚Ä¢ Communication et relations</li>
                                </ul>
                            </div>
                            <button class="w-full bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 transition-colors font-medium">
                                Acc√©der aux quiz Chef d'√âtablissement
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quiz Dashboard -->
            <div id="quizDashboard" class="max-w-6xl mx-auto hidden fade-in">
                <div class="mb-8 text-center">
                    <h1 id="dashboardTitle" class="text-3xl font-bold text-gray-900 mb-2"></h1>
                    <p class="text-gray-600">Quiz sp√©cialis√©s pour votre profil professionnel</p>
                </div>

                <div class="space-y-6">
                    <!-- Navigation -->
                    <div class="flex space-x-4 border-b">
                        <button id="quizzesTab" onclick="showQuizzesTab()" class="px-4 py-2 font-medium border-b-2 border-blue-600 text-blue-600">
                            Quiz Disponibles
                        </button>
                        <button id="resultsTab" onclick="showResultsTab()" class="px-4 py-2 font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                            Mes R√©sultats
                        </button>
                    </div>

                    <!-- Quiz List -->
                    <div id="quizList" class="grid gap-6 md:grid-cols-2 lg:grid-cols-3"></div>

                    <!-- Results History -->
                    <div id="resultsHistory" class="hidden"></div>
                </div>
            </div>

            <!-- Quiz Taker -->
            <div id="quizTaker" class="max-w-4xl mx-auto hidden fade-in">
                <!-- Quiz content will be dynamically generated -->
            </div>

            <!-- Quiz Results -->
            <div id="quizResults" class="max-w-4xl mx-auto hidden fade-in">
                <!-- Results content will be dynamically generated -->
            </div>
        </main>
    </div>

    <script>
        // Quiz data avec plus de questions
        const quizData = {
            inspector: [
                {
                    id: 'inspector-1',
                    title: 'IA et Inspection P√©dagogique - Niveau 1',
                    description: '√âvaluez vos connaissances de base sur l\'utilisation de l\'IA dans l\'inspection p√©dagogique',
                    difficulty: 'debutant',
                    questions: [
                        {
                            question: 'Quel est le principal avantage de l\'IA dans l\'analyse des pratiques p√©dagogiques ?',
                            options: [
                                'Remplacer compl√®tement l\'inspecteur',
                                'Analyser de grandes quantit√©s de donn√©es rapidement',
                                '√âliminer le besoin d\'observation en classe',
                                'Automatiser les rapports d\'inspection'
                            ],
                            correctAnswer: 1,
                            explanation: 'L\'IA excelle dans l\'analyse rapide de grandes quantit√©s de donn√©es, permettant aux inspecteurs de d√©tecter des tendances et patterns.',
                            points: 10
                        },
                        {
                            question: 'Dans le contexte de l\'inspection, l\'IA peut aider √† :',
                            options: [
                                'Personnaliser les formations des enseignants',
                                'Pr√©dire les r√©sultats des √©l√®ves',
                                'Identifier les besoins d\'accompagnement',
                                'Toutes les r√©ponses ci-dessus'
                            ],
                            correctAnswer: 3,
                            explanation: 'L\'IA peut effectivement contribuer √† tous ces aspects de l\'inspection p√©dagogique.',
                            points: 15
                        },
                        {
                            question: 'Quelle pr√©caution √©thique est essentielle lors de l\'utilisation d\'IA en inspection ?',
                            options: [
                                'Utiliser uniquement des algorithmes propri√©taires',
                                'Garantir la transparence et l\'explicabilit√© des d√©cisions',
                                'Automatiser toutes les √©valuations',
                                '√âviter toute intervention humaine'
                            ],
                            correctAnswer: 1,
                            explanation: 'La transparence et l\'explicabilit√© sont cruciales pour maintenir la confiance et l\'√©quit√© dans le processus d\'inspection.',
                            points: 20
                        },
                        {
                            question: 'L\'IA peut aider les inspecteurs √† identifier :',
                            options: [
                                'Les pratiques p√©dagogiques innovantes',
                                'Les difficult√©s d\'apprentissage des √©l√®ves',
                                'Les besoins de formation des enseignants',
                                'Toutes les r√©ponses ci-dessus'
                            ],
                            correctAnswer: 3,
                            explanation: 'L\'IA peut analyser de multiples aspects pour fournir une vision globale des besoins √©ducatifs.',
                            points: 15
                        },
                        {
                            question: 'Quel type de donn√©es l\'IA peut-elle analyser pour l\'inspection ?',
                            options: [
                                'Uniquement les r√©sultats scolaires',
                                'Les interactions en classe, r√©sultats et m√©thodes p√©dagogiques',
                                'Seulement les rapports d\'enseignants',
                                'Uniquement les donn√©es administratives'
                            ],
                            correctAnswer: 1,
                            explanation: 'L\'IA peut analyser une vari√©t√© de donn√©es pour donner une vue d\'ensemble compl√®te.',
                            points: 10
                        }
                    ]
                },
                {
                    id: 'inspector-2',
                    title: 'IA et Inspection P√©dagogique - Niveau 2',
                    description: 'Approfondissez vos connaissances sur les applications avanc√©es de l\'IA en inspection',
                    difficulty: 'intermediaire',
                    questions: [
                        {
                            question: 'Comment l\'IA peut-elle am√©liorer l\'objectivit√© des √©valuations ?',
                            options: [
                                'En √©liminant compl√®tement le facteur humain',
                                'En fournissant des analyses bas√©es sur des donn√©es factuelles',
                                'En automatisant toutes les d√©cisions',
                                'En rempla√ßant les grilles d\'√©valuation'
                            ],
                            correctAnswer: 1,
                            explanation: 'L\'IA fournit des analyses objectives bas√©es sur des donn√©es, compl√©tant l\'expertise humaine.',
                            points: 15
                        },
                        {
                            question: 'Quel est le r√¥le de l\'IA dans la d√©tection des in√©galit√©s scolaires ?',
                            options: [
                                'Elle ne peut pas d√©tecter les in√©galit√©s',
                                'Elle peut identifier des patterns d\'in√©galit√©s dans les donn√©es',
                                'Elle r√©sout automatiquement les in√©galit√©s',
                                'Elle remplace l\'analyse sociologique'
                            ],
                            correctAnswer: 1,
                            explanation: 'L\'IA peut identifier des patterns et corr√©lations r√©v√©lant des in√©galit√©s syst√©miques.',
                            points: 20
                        },
                        {
                            question: 'Dans l\'analyse des pratiques p√©dagogiques, l\'IA peut :',
                            options: [
                                '√âvaluer l\'efficacit√© des m√©thodes d\'enseignement',
                                'Sugg√©rer des am√©liorations personnalis√©es',
                                'Identifier les bonnes pratiques √† diffuser',
                                'Toutes les r√©ponses ci-dessus'
                            ],
                            correctAnswer: 3,
                            explanation: 'L\'IA peut contribuer √† tous ces aspects de l\'am√©lioration p√©dagogique.',
                            points: 15
                        }
                    ]
                }
            ],
            chef_etablissement: [
                {
                    id: 'chef-1',
                    title: 'IA et Gestion d\'√âtablissement - Niveau 1',
                    description: 'D√©couvrez les bases de l\'int√©gration de l\'IA dans la gestion d\'√©tablissement scolaire',
                    difficulty: 'debutant',
                    questions: [
                        {
                            question: 'Comment l\'IA peut-elle am√©liorer la gestion des emplois du temps ?',
                            options: [
                                'En cr√©ant des emplois du temps parfaits automatiquement',
                                'En optimisant les contraintes et ressources disponibles',
                                'En √©liminant le besoin de planification',
                                'En rempla√ßant les logiciels existants'
                            ],
                            correctAnswer: 1,
                            explanation: 'L\'IA peut optimiser la r√©partition des ressources en tenant compte de multiples contraintes simultan√©ment.',
                            points: 10
                        },
                        {
                            question: 'Dans la gestion des ressources humaines, l\'IA peut aider √† :',
                            options: [
                                'Recruter automatiquement les enseignants',
                                'Analyser les besoins en formation du personnel',
                                'Remplacer les entretiens individuels',
                                '√âliminer les conflits'
                            ],
                            correctAnswer: 1,
                            explanation: 'L\'IA peut analyser les donn√©es de performance et identifier les besoins de formation personnalis√©s.',
                            points: 15
                        },
                        {
                            question: 'Quel est un risque majeur de l\'IA dans la gestion d\'√©tablissement ?',
                            options: [
                                'La r√©duction des co√ªts',
                                'L\'am√©lioration de l\'efficacit√©',
                                'La d√©shumanisation des relations',
                                'L\'automatisation des t√¢ches'
                            ],
                            correctAnswer: 2,
                            explanation: 'Le principal risque est de perdre l\'aspect humain essentiel dans la gestion d\'un √©tablissement scolaire.',
                            points: 20
                        },
                        {
                            question: 'L\'IA peut aider dans la gestion financi√®re en :',
                            options: [
                                'Pr√©disant les besoins budg√©taires',
                                'Optimisant l\'allocation des ressources',
                                'D√©tectant les anomalies de d√©penses',
                                'Toutes les r√©ponses ci-dessus'
                            ],
                            correctAnswer: 3,
                            explanation: 'L\'IA peut contribuer √† tous ces aspects de la gestion financi√®re.',
                            points: 15
                        },
                        {
                            question: 'Pour la communication avec les parents, l\'IA peut :',
                            options: [
                                'Remplacer compl√®tement les √©changes humains',
                                'Personnaliser les informations selon les besoins',
                                '√âliminer le besoin de r√©unions',
                                'Automatiser toutes les r√©ponses'
                            ],
                            correctAnswer: 1,
                            explanation: 'L\'IA peut personnaliser la communication tout en pr√©servant l\'aspect humain.',
                            points: 10
                        }
                    ]
                },
                {
                    id: 'chef-2',
                    title: 'IA et Gestion d\'√âtablissement - Niveau 2',
                    description: 'Ma√Ætrisez les applications avanc√©es de l\'IA pour le pilotage d\'√©tablissement',
                    difficulty: 'intermediaire',
                    questions: [
                        {
                            question: 'Comment l\'IA peut-elle am√©liorer le pilotage p√©dagogique ?',
                            options: [
                                'En fournissant des tableaux de bord en temps r√©el',
                                'En pr√©disant les r√©sultats scolaires',
                                'En identifiant les √©l√®ves √† risque',
                                'Toutes les r√©ponses ci-dessus'
                            ],
                            correctAnswer: 3,
                            explanation: 'L\'IA peut contribuer √† tous ces aspects du pilotage p√©dagogique.',
                            points: 20
                        },
                        {
                            question: 'Dans la gestion des espaces, l\'IA peut optimiser :',
                            options: [
                                'L\'utilisation des salles de classe',
                                'La maintenance pr√©ventive',
                                'La consommation √©nerg√©tique',
                                'Toutes les r√©ponses ci-dessus'
                            ],
                            correctAnswer: 3,
                            explanation: 'L\'IA peut optimiser de nombreux aspects de la gestion des espaces.',
                            points: 15
                        },
                        {
                            question: 'Pour la s√©curit√© de l\'√©tablissement, l\'IA peut :',
                            options: [
                                'Surveiller les acc√®s automatiquement',
                                'D√©tecter les comportements anormaux',
                                'Alerter en cas d\'urgence',
                                'Toutes les r√©ponses ci-dessus'
                            ],
                            correctAnswer: 3,
                            explanation: 'L\'IA peut renforcer la s√©curit√© sur plusieurs niveaux.',
                            points: 15
                        }
                    ]
                }
            ]
        };

        // Application state
        let currentProfile = null;
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let answers = {};
        let startTime = null;
        let sessionResults = JSON.parse(localStorage.getItem('quizResults') || '[]');
        let sessionId = generateSessionId();

        // Utility functions
        function generateSessionId() {
            return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        }

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes}m ${remainingSeconds}s`;
        }

        function getScoreColor(percentage) {
            if (percentage >= 80) return 'text-green-600';
            if (percentage >= 60) return 'text-yellow-600';
            return 'text-red-600';
        }

        function getScoreMessage(percentage) {
            if (percentage >= 90) return 'Excellent ! Vous ma√Ætrisez parfaitement le sujet.';
            if (percentage >= 80) return 'Tr√®s bien ! Vous avez une bonne compr√©hension du sujet.';
            if (percentage >= 60) return 'Bien ! Il y a quelques points √† approfondir.';
            if (percentage >= 40) return 'Passable. Une r√©vision des concepts serait b√©n√©fique.';
            return 'Il est recommand√© de revoir les concepts fondamentaux.';
        }

        function getDifficultyColor(difficulty) {
            switch (difficulty) {
                case 'debutant': return 'bg-green-100 text-green-800';
                case 'intermediaire': return 'bg-yellow-100 text-yellow-800';
                case 'avance': return 'bg-red-100 text-red-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        function getCategoryLabel(category) {
            return category === 'inspector' ? 'Inspecteur' : 'Chef d\'√âtablissement';
        }

        // Navigation functions
        function selectProfile(profile) {
            currentProfile = profile;
            showQuizDashboard();
        }

        function showProfileSelection() {
            document.getElementById('profileSelection').classList.remove('hidden');
            document.getElementById('quizDashboard').classList.add('hidden');
            document.getElementById('quizTaker').classList.add('hidden');
            document.getElementById('quizResults').classList.add('hidden');
            document.getElementById('changeProfile').classList.add('hidden');
            currentProfile = null;
        }

        function showQuizDashboard() {
            document.getElementById('profileSelection').classList.add('hidden');
            document.getElementById('quizDashboard').classList.remove('hidden');
            document.getElementById('quizTaker').classList.add('hidden');
            document.getElementById('quizResults').classList.add('hidden');
            document.getElementById('changeProfile').classList.remove('hidden');
            
            const title = currentProfile === 'inspector' ? 'Quiz Inspecteur' : 'Quiz Chef d\'√âtablissement';
            document.getElementById('dashboardTitle').textContent = title;
            
            renderQuizList();
            showQuizzesTab();
        }

        function showQuizzesTab() {
            document.getElementById('quizzesTab').className = 'px-4 py-2 font-medium border-b-2 border-blue-600 text-blue-600';
            document.getElementById('resultsTab').className = 'px-4 py-2 font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700';
            document.getElementById('quizList').classList.remove('hidden');
            document.getElementById('resultsHistory').classList.add('hidden');
        }

        function showResultsTab() {
            document.getElementById('quizzesTab').className = 'px-4 py-2 font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700';
            document.getElementById('resultsTab').className = 'px-4 py-2 font-medium border-b-2 border-blue-600 text-blue-600';
            document.getElementById('quizList').classList.add('hidden');
            document.getElementById('resultsHistory').classList.remove('hidden');
            renderResultsHistory();
        }

        function startQuiz(quizId) {
            currentQuiz = quizData[currentProfile].find(q => q.id === quizId);
            currentQuestionIndex = 0;
            answers = {};
            startTime = Date.now();
            
            document.getElementById('quizDashboard').classList.add('hidden');
            document.getElementById('quizTaker').classList.remove('hidden');
            
            renderQuizTaker();
        }

        function backToQuizDashboard() {
            document.getElementById('quizTaker').classList.add('hidden');
            document.getElementById('quizResults').classList.add('hidden');
            document.getElementById('quizDashboard').classList.remove('hidden');
        }

        // Quiz functions
        function selectAnswer(answerIndex) {
            answers[currentQuestionIndex] = answerIndex;
            renderQuizTaker();
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuiz.questions.length - 1) {
                currentQuestionIndex++;
                renderQuizTaker();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuizTaker();
            }
        }

        function allQuestionsAnswered() {
            return currentQuiz.questions.every((_, index) => answers[index] !== undefined);
        }

        function submitQuiz() {
            if (!allQuestionsAnswered()) return;

            const timeSpent = Math.round((Date.now() - startTime) / 1000);
            let score = 0;
            let totalPoints = 0;
            const detailedAnswers = [];

            currentQuiz.questions.forEach((question, index) => {
                totalPoints += question.points;
                const isCorrect = answers[index] === question.correctAnswer;
                const points = isCorrect ? question.points : 0;
                score += points;
                
                detailedAnswers.push({
                    questionIndex: index,
                    selectedAnswer: answers[index],
                    correctAnswer: question.correctAnswer,
                    isCorrect,
                    points,
                    explanation: question.explanation
                });
            });

            const percentage = totalPoints > 0 ? Math.round((score / totalPoints) * 100) : 0;

            const result = {
                id: Date.now(),
                sessionId,
                userProfile: currentProfile,
                quizId: currentQuiz.id,
                quizTitle: currentQuiz.title,
                score,
                totalPoints,
                percentage,
                answers: detailedAnswers,
                completedAt: Date.now(),
                timeSpent
            };

            sessionResults.push(result);
            localStorage.setItem('quizResults', JSON.stringify(sessionResults));

            showQuizResults(result);
        }

        function showQuizResults(result) {
            document.getElementById('quizTaker').classList.add('hidden');
            document.getElementById('quizResults').classList.remove('hidden');
            renderQuizResults(result);
        }

        // Rendering functions
        function renderQuizList() {
            const quizList = document.getElementById('quizList');
            const quizzes = quizData[currentProfile] || [];
            
            quizList.innerHTML = quizzes.map(quiz => `
                <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-xl font-semibold text-gray-900">${quiz.title}</h3>
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${getDifficultyColor(quiz.difficulty)}">
                            ${quiz.difficulty}
                        </span>
                    </div>
                    <p class="text-gray-600 mb-4">${quiz.description}</p>
                    <div class="flex items-center justify-between mb-4">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">
                            ${getCategoryLabel(currentProfile)}
                        </span>
                        <span class="text-sm text-gray-500">${quiz.questions.length} questions</span>
                    </div>
                    <button onclick="startQuiz('${quiz.id}')" class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors font-medium">
                        Commencer le Quiz
                    </button>
                </div>
            `).join('');
        }

        function renderQuizTaker() {
            const question = currentQuiz.questions[currentQuestionIndex];
            const progress = ((currentQuestionIndex + 1) / currentQuiz.questions.length) * 100;
            
            document.getElementById('quizTaker').innerHTML = `
                <!-- En-t√™te -->
                <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <button onclick="backToQuizDashboard()" class="text-blue-600 hover:text-blue-800 font-medium">
                            ‚Üê Retour aux quiz
                        </button>
                        <span class="text-sm text-gray-500">
                            Question ${currentQuestionIndex + 1} sur ${currentQuiz.questions.length}
                        </span>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-900">${currentQuiz.title}</h1>
                    <div class="w-full bg-gray-200 rounded-full h-2 mt-4">
                        <div class="bg-blue-600 h-2 rounded-full progress-bar" style="width: ${progress}%"></div>
                    </div>
                </div>

                <!-- Question actuelle -->
                <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                    <h2 class="text-xl font-semibold text-gray-900 mb-6">
                        ${question.question}
                    </h2>
                    
                    <div class="space-y-3">
                        ${question.options.map((option, index) => `
                            <button onclick="selectAnswer(${index})" 
                                    class="answer-option w-full text-left p-4 rounded-lg border-2 transition-colors ${
                                        answers[currentQuestionIndex] === index 
                                            ? 'border-blue-600 bg-blue-50' 
                                            : 'border-gray-200 hover:border-gray-300'
                                    }">
                                <span class="font-medium text-gray-700">
                                    ${String.fromCharCode(65 + index)}.
                                </span>
                                <span class="ml-2">${option}</span>
                            </button>
                        `).join('')}
                    </div>
                </div>

                <!-- Navigation -->
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex justify-between items-center">
                        <button onclick="previousQuestion()" 
                                ${currentQuestionIndex === 0 ? 'disabled' : ''}
                                class="px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed">
                            ‚Üê Pr√©c√©dent
                        </button>

                        <div class="flex space-x-3">
                            ${currentQuestionIndex < currentQuiz.questions.length - 1 ? `
                                <button onclick="nextQuestion()" 
                                        ${answers[currentQuestionIndex] === undefined ? 'disabled' : ''}
                                        class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed">
                                    Suivant ‚Üí
                                </button>
                            ` : `
                                <button onclick="submitQuiz()" 
                                        ${!allQuestionsAnswered() ? 'disabled' : ''}
                                        class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed">
                                    Terminer le Quiz
                                </button>
                            `}
                        </div>
                    </div>

                    <!-- Indicateur de progression -->
                    <div class="mt-4 flex justify-center space-x-2">
                        ${currentQuiz.questions.map((_, index) => `
                            <div class="w-3 h-3 rounded-full ${
                                index === currentQuestionIndex
                                    ? 'bg-blue-600'
                                    : answers[index] !== undefined
                                    ? 'bg-green-500'
                                    : 'bg-gray-300'
                            }"></div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderQuizResults(result) {
            document.getElementById('quizResults').innerHTML = `
                <!-- En-t√™te -->
                <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                    <button onclick="backToQuizDashboard()" class="text-blue-600 hover:text-blue-800 font-medium mb-4">
                        ‚Üê Retour au tableau de bord
                    </button>
                    <h1 class="text-3xl font-bold text-gray-900 mb-2">R√©sultats du Quiz</h1>
                    <p class="text-gray-600">${result.quizTitle}</p>
                </div>

                <!-- Score principal -->
                <div class="bg-white rounded-lg shadow-md p-8 mb-6 text-center">
                    <div class="text-6xl font-bold mb-4 ${getScoreColor(result.percentage)}">
                        ${result.percentage}%
                    </div>
                    <div class="text-xl text-gray-700 mb-2">
                        ${result.score} / ${result.totalPoints} points
                    </div>
                    <p class="text-gray-600 mb-4">
                        ${getScoreMessage(result.percentage)}
                    </p>
                    <div class="flex justify-center space-x-8 text-sm text-gray-500">
                        <div>
                            <span class="font-medium">Temps:</span> ${formatTime(result.timeSpent)}
                        </div>
                        <div>
                            <span class="font-medium">Date:</span> ${new Date(result.completedAt).toLocaleDateString()}
                        </div>
                    </div>
                </div>

                <!-- Statistiques d√©taill√©es -->
                <div class="grid md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white rounded-lg shadow-md p-6 text-center">
                        <div class="text-3xl font-bold text-green-600 mb-2">
                            ${result.answers.filter(a => a.isCorrect).length}
                        </div>
                        <div class="text-gray-600">Bonnes r√©ponses</div>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6 text-center">
                        <div class="text-3xl font-bold text-red-600 mb-2">
                            ${result.answers.filter(a => !a.isCorrect).length}
                        </div>
                        <div class="text-gray-600">Mauvaises r√©ponses</div>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6 text-center">
                        <div class="text-3xl font-bold text-blue-600 mb-2">
                            ${result.answers.length}
                        </div>
                        <div class="text-gray-600">Total questions</div>
                    </div>
                </div>

                <!-- D√©tail des r√©ponses -->
                <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">D√©tail des r√©ponses</h3>
                    <div class="space-y-4">
                        ${result.answers.map((answer, index) => {
                            const question = currentQuiz.questions[answer.questionIndex];
                            return `
                                <div class="border rounded-lg p-4 ${answer.isCorrect ? 'border-green-200 bg-green-50' : 'border-red-200 bg-red-50'}">
                                    <div class="flex items-start justify-between mb-2">
                                        <h4 class="font-medium text-gray-900">Question ${index + 1}</h4>
                                        <span class="text-sm font-medium ${answer.isCorrect ? 'text-green-600' : 'text-red-600'}">
                                            ${answer.isCorrect ? '‚úì Correct' : '‚úó Incorrect'}
                                        </span>
                                    </div>
                                    <p class="text-gray-700 mb-3">${question.question}</p>
                                    <div class="space-y-2">
                                        <div class="text-sm">
                                            <span class="font-medium">Votre r√©ponse:</span>
                                            <span class="${answer.isCorrect ? 'text-green-600' : 'text-red-600'}">
                                                ${question.options[answer.selectedAnswer]}
                                            </span>
                                        </div>
                                        ${!answer.isCorrect ? `
                                            <div class="text-sm">
                                                <span class="font-medium">Bonne r√©ponse:</span>
                                                <span class="text-green-600">
                                                    ${question.options[answer.correctAnswer]}
                                                </span>
                                            </div>
                                        ` : ''}
                                        <div class="text-sm text-gray-600 bg-white p-2 rounded border-l-4 border-blue-500">
                                            <span class="font-medium">Explication:</span> ${answer.explanation}
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>

                <!-- Actions -->
                <div class="bg-white rounded-lg shadow-md p-6 text-center">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Que faire ensuite ?</h3>
                    <div class="space-y-3">
                        <button onclick="backToQuizDashboard()" class="w-full md:w-auto px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium">
                            Essayer d'autres quiz
                        </button>
                        ${result.percentage < 80 ? `
                            <p class="text-sm text-gray-600 mt-2">
                                Conseil: R√©visez les concepts et retentez le quiz pour am√©liorer votre score !
                            </p>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        function renderResultsHistory() {
            const profileResults = sessionResults.filter(r => r.userProfile === currentProfile);
            
            if (profileResults.length === 0) {
                document.getElementById('resultsHistory').innerHTML = `
                    <div class="text-center py-12">
                        <div class="text-gray-400 text-6xl mb-4">üìä</div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-2">Aucun r√©sultat</h3>
                        <p class="text-gray-500">Vous n'avez pas encore pass√© de quiz pour ce profil.</p>
                    </div>
                `;
                return;
            }

            const totalQuizzes = profileResults.length;
            const averageScore = Math.round(profileResults.reduce((sum, r) => sum + r.percentage, 0) / totalQuizzes);
            const bestScore = Math.max(...profileResults.map(r => r.percentage));

            document.getElementById('resultsHistory').innerHTML = `
                <!-- Statistiques globales -->
                <div class="grid md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white rounded-lg shadow-md p-6 text-center">
                        <div class="text-3xl font-bold text-blue-600 mb-2">${totalQuizzes}</div>
                        <div class="text-gray-600">Quiz compl√©t√©s</div>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6 text-center">
                        <div class="text-3xl font-bold text-green-600 mb-2">${averageScore}%</div>
                        <div class="text-gray-600">Score moyen</div>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6 text-center">
                        <div class="text-3xl font-bold text-purple-600 mb-2">${bestScore}%</div>
                        <div class="text-gray-600">Meilleur score</div>
                    </div>
                </div>

                <!-- Historique des r√©sultats -->
                <div class="bg-white rounded-lg shadow-md overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">Historique des Quiz</h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quiz</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Score</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Temps</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                ${profileResults.reverse().map(result => `
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm font-medium text-gray-900">${result.quizTitle}</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium ${
                                                result.percentage >= 80 ? 'bg-green-100 text-green-800' :
                                                result.percentage >= 60 ? 'bg-yellow-100 text-yellow-800' :
                                                'bg-red-100 text-red-800'
                                            }">
                                                ${result.percentage}%
                                            </span>
                                            <span class="ml-2 text-sm text-gray-500">(${result.score}/${result.totalPoints})</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            ${formatTime(result.timeSpent)}
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            ${new Date(result.completedAt).toLocaleDateString('fr-FR')}
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            showProfileSelection();
        });
    </script>
</body>
</html>
